[tasks.clean-test]
    command = "cargo"
    args = [
        "llvm-cov",
        "clean",
        "--workspace",
    ]

[tasks.main-test]
    command = "cargo"
    args = [
        "all-features",
        "llvm-cov",
        "--no-report",
        "nextest",
        "--no-fail-fast",
    ]
    dependencies = [
        "install-dep",
        "clean-test",
    ]

[tasks.test]
    command = "cargo"
    args = [
        "llvm-cov",
        "report",
        "--output-path",
        "lcov.info",
        "--lcov",
    ]
    dependencies = [
        "main-test",
    ]

[tasks.clean]
    dependencies = [
        "clean-emojis",
    ]

[tasks.clean-emojis]
    script = "rm -f ./emojis.json"

[tasks.install-dep]
    script = "cargo install cargo-all-features cargo-llvm-cov cargo-nextest"
